Updated typing across the library
